// dump script
// SELECT cat.id, cat.uid, cat.description, json_agg(C.uid ORDER BY C.uid)
//   FROM categories cat, coin_categories M, coins C
//  WHERE M.category_id = cat.id
//    AND M.coin_id = C.id
//  GROUP BY cat.id
//  ORDER BY cat.id

const categories = [
  { uid: 'blockchains', name: 'Blockchains', coins: ['algorand', 'avalanche-2', 'binancecoin', 'bitcoin', 'bitcoin-cash', 'cardano', 'cosmos', 'dash', 'decred', 'eos', 'ethereum', 'ethereum-classic', 'fantom', 'harmony', 'icon', 'internet-computer', 'iostoken', 'iota', 'litecoin', 'monero', 'near', 'nem', 'neo', 'ontology', 'polkadot', 'qtum', 'ripple', 'solana', 'stellar', 'tezos', 'tron', 'waves', 'zcash', 'zilliqa'], description: JSON.stringify({ de: 'Native cryptocurrencies on major blockchains.', en: 'Native cryptocurrencies on major blockchains.', es: 'Native cryptocurrencies on major blockchains.', fa: 'Native cryptocurrencies on major blockchains.', fr: 'Native cryptocurrencies on major blockchains.', ko: 'Native cryptocurrencies on major blockchains.', ru: 'Native cryptocurrencies on major blockchains.', tr: 'Native cryptocurrencies on major blockchains.', zh: 'Native cryptocurrencies on major blockchains.' }) },
  { uid: 'dexes', name: 'DEXes', coins: ['0x', '1inch', 'airswap', 'anyswap', 'aurora-dao', 'balancer', 'bancor', 'curve-dao-token', 'derivadao', 'dodo', 'dydx', 'ellipsis', 'havven', 'injective-protocol', 'joe', 'loopring', 'mcdex', 'mdex', 'orca', 'osmosis', 'pancakeswap-token', 'pangolin', 'paraswap', 'perpetual-protocol', 'polkadex', 'quick', 'raydium', 'serum', 'sushi', 'thorchain', 'uniswap', 'zkswap'], description: JSON.stringify({ de: 'Decentralized cryptocurrency exchanges.', en: 'Decentralized cryptocurrency exchanges.', es: 'Decentralized cryptocurrency exchanges.', fa: 'Decentralized cryptocurrency exchanges.', fr: 'Decentralized cryptocurrency exchanges.', ko: 'Decentralized cryptocurrency exchanges.', ru: 'Decentralized cryptocurrency exchanges.', tr: 'Decentralized cryptocurrency exchanges.', zh: 'Decentralized cryptocurrency exchanges.' }) },
  { uid: 'lending', name: 'Lending', coins: ['aave', 'alchemix', 'alpaca-finance', 'anchor-protocol', 'bzx-protocol', 'celsius-degree-token', 'compound-governance-token', 'cream-2', 'dforce-token', 'force-protocol', 'kava', 'liquity', 'mainframe', 'maker', 'notional-finance', 'oxygen', 'spell-token', 'truefi', 'venus'], description: JSON.stringify({ de: 'Protocols for lending and borrowing.', en: 'Protocols for lending and borrowing.', es: 'Protocols for lending and borrowing.', fa: 'Protocols for lending and borrowing.', fr: 'Protocols for lending and borrowing.', ko: 'Protocols for lending and borrowing.', ru: 'Protocols for lending and borrowing.', tr: 'Protocols for lending and borrowing.', zh: 'Protocols for lending and borrowing.' }) },
  { uid: 'yield_aggregators', name: 'Yield Aggregators', coins: ['88mph', 'akropolis', 'alpaca-finance', 'alpha-finance', 'auto', 'badger-dao', 'beefy-finance', 'bella-protocol', 'convex-finance', 'harvest-finance', 'pickle-finance', 'rari-governance-token', 'solfarm', 'value-liquidity', 'vesper-finance', 'yearn-finance', 'yfii-finance', 'yield-yak'], description: JSON.stringify({ de: 'Solutions for earning from idle crypto assets.', en: 'Solutions for earning from idle crypto assets.', es: 'Solutions for earning from idle crypto assets.', fa: 'Solutions for earning from idle crypto assets.', fr: 'Solutions for earning from idle crypto assets.', ko: 'Solutions for earning from idle crypto assets.', ru: 'Solutions for earning from idle crypto assets.', tr: 'Solutions for earning from idle crypto assets.', zh: 'Solutions for earning from idle crypto assets.' }) },
  { uid: 'gaming', name: 'Gaming', coins: ['aavegotchi', 'axie-infinity', 'chain-games', 'crowns', 'decentral-games', 'decentraland', 'enjincoin', 'gala', 'illuvium', 'my-neighbor-alice', 'ovr', 'revv', 'smooth-love-potion', 'star-atlas', 'the-sandbox', 'ultra', 'yield-guild-games'], description: JSON.stringify({ de: 'Crypto projects in gaming and VR sector.', en: 'Crypto projects in gaming and VR sector.', es: 'Crypto projects in gaming and VR sector.', fa: 'Crypto projects in gaming and VR sector.', fr: 'Crypto projects in gaming and VR sector.', ko: 'Crypto projects in gaming and VR sector.', ru: 'Crypto projects in gaming and VR sector.', tr: 'Crypto projects in gaming and VR sector.', zh: 'Crypto projects in gaming and VR sector.' }) },
  { uid: 'oracles', name: 'Oracles', coins: ['api3', 'band-protocol', 'berry-data', 'chainlink', 'dia-data', 'kylin-network', 'nest', 'razor-network', 'tellor', 'umbrella-network', 'wink'], description: JSON.stringify({ de: 'Connecting real world data to smart contracts.', en: 'Connecting real world data to smart contracts.', es: 'Connecting real world data to smart contracts.', fa: 'Connecting real world data to smart contracts.', fr: 'Connecting real world data to smart contracts.', ko: 'Connecting real world data to smart contracts.', ru: 'Connecting real world data to smart contracts.', tr: 'Connecting real world data to smart contracts.', zh: 'Connecting real world data to smart contracts.' }) },
  { uid: 'nft', name: 'NFT', coins: ['alien-worlds', 'auction', 'bondly', 'dego-finance', 'ethernity-chain', 'flow', 'immutable-x', 'jenny-metaverse-dao-token', 'nftx', 'rarible', 'refinable', 'superfarm', 'terra-virtua-kolect', 'wax', 'whale'], description: JSON.stringify({ de: 'NFT projects.', en: 'NFT projects.', es: 'NFT projects.', fa: 'NFT projects.', fr: 'NFT projects.', ko: 'NFT projects.', ru: 'NFT projects.', tr: 'NFT projects.', zh: 'NFT projects.' }) },
  { uid: 'privacy', name: 'Privacy', coins: ['dash', 'dusk-network', 'grin', 'haven', 'hopr', 'keep-network', 'monero', 'nucypher', 'oasis-network', 'ocean-protocol', 'orchid-protocol', 'pirate-chain', 'secret', 'sentinel', 'tornado-cash', 'verge', 'zcash', 'zcoin', 'zencash'], description: JSON.stringify({ de: 'Projects working on privacy solutions.', en: 'Projects working on privacy solutions.', es: 'Projects working on privacy solutions.', fa: 'Projects working on privacy solutions.', fr: 'Projects working on privacy solutions.', ko: 'Projects working on privacy solutions.', ru: 'Projects working on privacy solutions.', tr: 'Projects working on privacy solutions.', zh: 'Projects working on privacy solutions.' }) },
  { uid: 'storage', name: 'Storage', coins: ['arweave', 'bittorrent-2', 'bluzelle', 'crust-network', 'filecoin', 'holotoken', 'prometeus', 'siacoin', 'storj'], description: JSON.stringify({ de: 'Decentralized data-storage.', en: 'Decentralized data-storage.', es: 'Decentralized data-storage.', fa: 'Decentralized data-storage.', fr: 'Decentralized data-storage.', ko: 'Decentralized data-storage.', ru: 'Decentralized data-storage.', tr: 'Decentralized data-storage.', zh: 'Decentralized data-storage.' }) },
  { uid: 'wallets', name: 'Wallets', coins: ['bread', 'crypto-com-chain', 'gnosis', 'math', 'nexo', 'pundi-x-2', 'safepal', 'status', 'swissborg', 'trust-wallet-token', 'xdefi'], description: JSON.stringify({ de: 'Tokens issued by cryptocurrency wallets.', en: 'Tokens issued by cryptocurrency wallets.', es: 'Tokens issued by cryptocurrency wallets.', fa: 'Tokens issued by cryptocurrency wallets.', fr: 'Tokens issued by cryptocurrency wallets.', ko: 'Tokens issued by cryptocurrency wallets.', ru: 'Tokens issued by cryptocurrency wallets.', tr: 'Tokens issued by cryptocurrency wallets.', zh: 'Tokens issued by cryptocurrency wallets.' }) },
  { uid: 'identity', name: 'Identity', coins: ['carry', 'civic', 'ethereum-name-service', 'fio-protocol', 'litentry', 'metadium', 'selfkey'], description: JSON.stringify({ de: 'Decentralized identity.', en: 'Decentralized identity.', es: 'Decentralized identity.', fa: 'Decentralized identity.', fr: 'Decentralized identity.', ko: 'Decentralized identity.', ru: 'Decentralized identity.', tr: 'Decentralized identity.', zh: 'Decentralized identity.' }) },
  { uid: 'scaling', name: 'Scaling', coins: ['boba-network', 'celer-network', 'elrond-erd-2', 'harmony', 'hermez-network-token', 'matic-network', 'skale', 'xdai-stake'], description: JSON.stringify({ de: 'Solutions for faster blockchain transactions.', en: 'Solutions for faster blockchain transactions.', es: 'Solutions for faster blockchain transactions.', fa: 'Solutions for faster blockchain transactions.', fr: 'Solutions for faster blockchain transactions.', ko: 'Solutions for faster blockchain transactions.', ru: 'Solutions for faster blockchain transactions.', tr: 'Solutions for faster blockchain transactions.', zh: 'Solutions for faster blockchain transactions.' }) },
  { uid: 'analytics', name: 'Analytics', coins: ['big-data-protocol', 'dextools', 'graphlinq-protocol', 'parsiq', 'santiment-network-token', 'step-finance', 'uniwhales', 'yieldwatch'], description: JSON.stringify({ de: 'Token-powered analytics and investment instruments.', en: 'Token-powered analytics and investment instruments.', es: 'Token-powered analytics and investment instruments.', fa: 'Token-powered analytics and investment instruments.', fr: 'Token-powered analytics and investment instruments.', ko: 'Token-powered analytics and investment instruments.', ru: 'Token-powered analytics and investment instruments.', tr: 'Token-powered analytics and investment instruments.', zh: 'Token-powered analytics and investment instruments.' }) },
  { uid: 'yield_tokens', name: 'Yield Tokens', coins: ['aave-busd-v1', 'aave-dai-v1', 'aave-link-v1', 'aave-mkr-v1', 'aave-ren-v1', 'aave-tusd-v1', 'aave-usdc-v1', 'aave-usdt-v1', 'aave-wbtc-v1', 'ankr-reward-earning-staked-eth', 'ankreth', 'cdai', 'compound-ether', 'compound-uniswap', 'compound-usd-coin', 'compound-usdt', 'compound-wrapped-btc', 'meowshi', 'xsushi'], description: JSON.stringify({ de: 'Interesting Bearing Tokens.', en: 'Interesting Bearing Tokens.', es: 'Interesting Bearing Tokens.', fa: 'Interesting Bearing Tokens.', fr: 'Interesting Bearing Tokens.', ko: 'Interesting Bearing Tokens.', ru: 'Interesting Bearing Tokens.', tr: 'Interesting Bearing Tokens.', zh: 'Interesting Bearing Tokens.' }) },
  { uid: 'exchange_tokens', name: 'Exchange Tokens', coins: ['binancecoin', 'crypto-com-chain', 'ftx-token', 'gatechain-token', 'huobi-token', 'kucoin-shares', 'leo-token', 'mx-token', 'okb', 'orion-protocol', 'tokocrypto', 'wazirx', 'woo-network', 'zb-token', 'zipmex-token'], description: JSON.stringify({ de: 'Tokens issued by centralized exchanges.', en: 'Tokens issued by centralized exchanges.', es: 'Tokens issued by centralized exchanges.', fa: 'Tokens issued by centralized exchanges.', fr: 'Tokens issued by centralized exchanges.', ko: 'Tokens issued by centralized exchanges.', ru: 'Tokens issued by centralized exchanges.', tr: 'Tokens issued by centralized exchanges.', zh: 'Tokens issued by centralized exchanges.' }) },
  { uid: 'stablecoins', name: 'Stablecoins', coins: ['alchemix-usd', 'binance-usd', 'celo-dollar', 'dai', 'fei-usd', 'frax', 'gemini-dollar', 'husd', 'liquity-usd', 'magic-internet-money', 'neutrino', 'nusd', 'paxos-standard', 'terrausd', 'tether', 'tether-eurt', 'true-usd', 'usd-coin', 'usdk', 'vai'], description: JSON.stringify({ de: 'Crypto tokens pegged 1-1 to fiat currency.', en: 'Crypto tokens pegged 1-1 to fiat currency.', es: 'Crypto tokens pegged 1-1 to fiat currency.', fa: 'Crypto tokens pegged 1-1 to fiat currency.', fr: 'Crypto tokens pegged 1-1 to fiat currency.', ko: 'Crypto tokens pegged 1-1 to fiat currency.', ru: 'Crypto tokens pegged 1-1 to fiat currency.', tr: 'Crypto tokens pegged 1-1 to fiat currency.', zh: 'Crypto tokens pegged 1-1 to fiat currency.' }) },
  { uid: 'tokenized_bitcoin', name: 'Tokenized Bitcoin', coins: ['huobi-btc', 'ptokens-btc', 'renbtc', 'sbtc', 'tbtc', 'wrapped-bitcoin'], description: JSON.stringify({ de: 'Crypto tokens pegged 1-1 to Bitcoin price.', en: 'Crypto tokens pegged 1-1 to Bitcoin price.', es: 'Crypto tokens pegged 1-1 to Bitcoin price.', fa: 'Crypto tokens pegged 1-1 to Bitcoin price.', fr: 'Crypto tokens pegged 1-1 to Bitcoin price.', ko: 'Crypto tokens pegged 1-1 to Bitcoin price.', ru: 'Crypto tokens pegged 1-1 to Bitcoin price.', tr: 'Crypto tokens pegged 1-1 to Bitcoin price.', zh: 'Crypto tokens pegged 1-1 to Bitcoin price.' }) },
  { uid: 'risk_management', name: 'Risk Management', coins: ['armor', 'barnbridge', 'certik', 'dhedge-dao', 'hedget', 'insurace', 'melon', 'nsure-network', 'nxm', 'quantstamp', 'ribbon-finance', 'saffron-finance', 'stafi', 'tranchess', 'wrapped-nxm'], description: JSON.stringify({ de: 'Risk assessment, insurance and hedging.', en: 'Risk assessment, insurance and hedging.', es: 'Risk assessment, insurance and hedging.', fa: 'Risk assessment, insurance and hedging.', fr: 'Risk assessment, insurance and hedging.', ko: 'Risk assessment, insurance and hedging.', ru: 'Risk assessment, insurance and hedging.', tr: 'Risk assessment, insurance and hedging.', zh: 'Risk assessment, insurance and hedging.' }) },
  { uid: 'synthetics', name: 'Synthetics', coins: ['alchemix', 'havven', 'mirror-protocol', 'stp-network', 'terra-luna', 'uma'], description: JSON.stringify({ de: 'Platforms for creating decentralized synthetic assets.', en: 'Platforms for creating decentralized synthetic assets.', es: 'Platforms for creating decentralized synthetic assets.', fa: 'Platforms for creating decentralized synthetic assets.', fr: 'Platforms for creating decentralized synthetic assets.', ko: 'Platforms for creating decentralized synthetic assets.', ru: 'Platforms for creating decentralized synthetic assets.', tr: 'Platforms for creating decentralized synthetic assets.', zh: 'Platforms for creating decentralized synthetic assets.' }) },
  { uid: 'index_funds', name: 'Index Funds', coins: ['basketdao-defi-index', 'btc-2x-flexible-leverage-index', 'cryptocurrency-top-10-tokens-index', 'defi-top-5-tokens-index', 'defipulse-index', 'degen-index', 'eth-2x-flexible-leverage-index', 'piedao-defi-large-cap', 'power-index-pool-token'], description: JSON.stringify({ de: 'Assets that pegged in price to a set of tokens.', en: 'Assets that pegged in price to a set of tokens.', es: 'Assets that pegged in price to a set of tokens.', fa: 'Assets that pegged in price to a set of tokens.', fr: 'Assets that pegged in price to a set of tokens.', ko: 'Assets that pegged in price to a set of tokens.', ru: 'Assets that pegged in price to a set of tokens.', tr: 'Assets that pegged in price to a set of tokens.', zh: 'Assets that pegged in price to a set of tokens.' }) },
  { uid: 'prediction', name: 'Prediction', coins: ['augur', 'gnosis', 'plotx', 'polkamarkets', 'prosper'], description: JSON.stringify({ de: 'Markets to bet on events in the future.', en: 'Markets to bet on events in the future.', es: 'Markets to bet on events in the future.', fa: 'Markets to bet on events in the future.', fr: 'Markets to bet on events in the future.', ko: 'Markets to bet on events in the future.', ru: 'Markets to bet on events in the future.', tr: 'Markets to bet on events in the future.', zh: 'Markets to bet on events in the future.' }) },
  { uid: 'fundraising', name: 'Fundraising', coins: ['cardstarter', 'dao-maker', 'duckdaodime', 'idia', 'impossible-finance', 'occamfi', 'polkastarter', 'poolz-finance', 'trustswap'], description: JSON.stringify({ de: 'Fundraising and token sale platforms.', en: 'Fundraising and token sale platforms.', es: 'Fundraising and token sale platforms.', fa: 'Fundraising and token sale platforms.', fr: 'Fundraising and token sale platforms.', ko: 'Fundraising and token sale platforms.', ru: 'Fundraising and token sale platforms.', tr: 'Fundraising and token sale platforms.', zh: 'Fundraising and token sale platforms.' }) },
  { uid: 'infrastructure', name: 'Infrastructure', coins: ['aelf', 'allianceblock', 'ankr', 'blockstack', 'bonfida', 'contentos', 'dora-factory', 'keep3rv1', 'kusama', 'lisk', 'mxc', 'nervos-network', 'origin-protocol', 'radicle', 'republic-protocol', 'strong', 'the-graph', 'wanchain'], description: JSON.stringify({ de: 'Projects building infrastructure solutions.', en: 'Projects building infrastructure solutions.', es: 'Projects building infrastructure solutions.', fa: 'Projects building infrastructure solutions.', fr: 'Projects building infrastructure solutions.', ko: 'Projects building infrastructure solutions.', ru: 'Projects building infrastructure solutions.', tr: 'Projects building infrastructure solutions.', zh: 'Projects building infrastructure solutions.' }) },
  { uid: 'reserve_currency', name: 'Infrastructure', coins: ['euphoria-2', 'invictus-capital-token', 'olympus', 'snowbank', 'spartacus', 'wonderland'], description: JSON.stringify({ de: ' Asset backed reserve currencies ', en: ' Asset backed reserve currencies ', es: ' Asset backed reserve currencies ', fa: ' Asset backed reserve currencies ', fr: ' Asset backed reserve currencies ', ko: ' Asset backed reserve currencies ', ru: ' Asset backed reserve currencies ', tr: ' Asset backed reserve currencies ', zh: ' Asset backed reserve currencies ' }) }
]

module.exports = {
  up: async queryInterface => {
    const categoryRecords = []
    const categoryMap = {}

    categories.forEach(({ coins, ...category }) => {
      categoryMap[category.uid] = { coins }
      categoryRecords.push(category)
    })

    await queryInterface.bulkInsert('categories', categoryRecords, {})
    const categoryIds = await queryInterface.sequelize.query('select id, uid from categories', {
      type: queryInterface.sequelize.QueryTypes.SELECT
    })

    categoryIds.forEach(category => {
      categoryMap[category.uid].categoryId = category.id
    })

    const categoryCoins = Object.values(categoryMap)
    const query = (`
      INSERT INTO coin_categories(coin_id, category_id)
      SELECT id as coin_id, :categoryId as category_id FROM coins
      where uid IN (:coins)
    `)

    for (let i = 0; i < categoryCoins.length; i += 1) {
      const { categoryId, coins } = categoryCoins[i];

      await queryInterface.sequelize.query(query, {
        replacements: { categoryId, coins }
      })
    }
  },

  down: async (queryInterface) => {
    await queryInterface.bulkDelete('categories', null, {})
    await queryInterface.bulkDelete('coin_categories', null, {})
  }
}
